<?php

/*
 * ###############################################################################################################
 * ###############################################################################################################
 * ##                                                                                                           ##
 * ##  ######################     #####            #####     #####            #####     ######################  ##
 * ##  ######################     #####            #####     #####            #####     ######################  ##
 * ##  ######################     ######           #####     #####            #####     ######################  ##
 * ##  ######################     #######          #####     #####            #####     ######################  ##
 * ##  ######################     ########         #####     #####            #####     ######################  ##
 * ##  #####            #####     #########        #####     #####            #####     #####                   ##
 * ##  #####            #####     ##########       #####     #####            #####     #####     .COM.BR       ##
 * ##  #####            #####     ##### #####      #####     ######################     ######################  ##
 * ##  #####            #####     #####  #####     #####     ######################     ######################  ##
 * ##  ######################     #####   #####    #####     ######################     ######################  ##
 * ##  ######################     #####    #####   #####     ######################     ######################  ##
 * ##  ######################     #####     #####  #####     ######################     ######################  ##
 * ##  ######################     #####      ##### #####     #####            #####                      #####  ##
 * ##  ######################     #####       ##########     #####            #####                      #####  ##
 * ##  #####                      #####        #########     #####            #####     ######################  ##
 * ##  #####                      #####         ########     #####            #####     ######################  ##
 * ##  #####                      #####          #######     #####            #####     ######################  ##
 * ##  #####                      #####           ######     #####            #####     ######################  ##
 * ##  #####                      #####            #####     #####            #####     ######################  ##
 * ##                                                                                                           ##
 * ###############################################################################################################
 * ##                   TODOS OS DIREITOS RESERVADOS  O SENHOR E MEU PASTOR E NADA ME FALTARÃ                   ##
 * ###############################################################################################################
 * ###############################################################################################################
 * 
 * ###############################################################################################################
 * ##                                          INICIO CODIGO DE FONTE!                                          ##
 * ###############################################################################################################
 */

class Nucleo {
    private $controladorAtual;
    private $acaoAtual;
    public function executar() {
        $url = explode("index.php", $_SERVER['PHP_SELF']);
        $url = end($url);
        $params = array();
        if (!empty($url)):
            $url = explode('/', $url);
            if (isset($url[2])):
                if (strlen($url[2]) == 0):
                    unset($url[2]);
                endif;
            endif;
            array_shift($url);
            $controladorAtual = $url[0].'Controlador';
            array_shift($url);
            if (isset($url[0])):
                $acaoAtual = $url[0];
                array_shift($url);
            else:
                $acaoAtual = 'inicio';
            endif;
            if (count($url) > 0):
                $params = $url;
            endif;
        else:
            $controladorAtual   = 'inicioControlador';
            $acaoAtual          = 'inicio';
        endif;
        require_once 'Controlador.php';
        $c = new $controladorAtual();
        call_user_func_array(array($c, $acaoAtual), $params);
    }
}
